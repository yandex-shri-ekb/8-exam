(function(a,c){a.widget("boolive.widget",{_parent:c,_children:c,_create:function(){var b=this;this._children={};this.element.on("_create"+this.eventNamespace,function(a,c){return!b._addChild(c)});this.element.on("_destroy"+this.eventNamespace,function(a,c){return!b._deleteChild(c)});this.element.trigger("_create",[this])},_destroy:function(){this.element.trigger("_destroy",[this])},_addChild:function(b){return b!=this?(this._children[b.uuid]=b,b._parent=this,!0):!1},_deleteChild:function(b){return b!=
this?(delete this._children[b.uuid],!0):!1},callChildren:function(b,d,g){var e=c;g&&a.isFunction(this["call_"+b])&&(a.isArray(d)||(d=[d]),e=[{target:g,direct:"children"}].concat(d),e=this["call_"+b].apply(this,e));if(e!==c)return e;var f=[],h;for(h in this._children)e=this._children[h].callChildren(b,d,g||this),e!==c&&f.push(e);return f.length?f:c},callParents:function(b,d,g,e){g||(g=null);var f=c;!e&&g&&a.isFunction(this["call_"+b])&&(a.isArray(d)||(d=[d]),f=[{target:g,direct:"parents"}].concat(d),
f=this["call_"+b].apply(this,f));return f!==c?f:this._parent?this._parent.callParents(b,d,g||this,e):e?this.callChildren(b,d,g):c}})})(jQuery);
(function(a){a.widget("exam.modal-video",a.boolive.widget,{_create:function(){a.boolive.widget.prototype._create.call(this);var c=this;this.element.on("click",function(b){b.target!==c.element.find(".modal__window")[0]&&c.call_playVideo({},!1)})},call_playVideo:function(a,b){if(b)this.element.addClass("modal_open_true");else{this.element.removeClass("modal_open_true");var d=this.element.find("iframe");d.replaceWith(d.clone())}}})})(jQuery);
(function(a){a.widget("exam.person-active",a.boolive.widget,{_menuStates:null,_create:function(){a.boolive.widget.prototype._create.call(this);this._menuStates={};this.call_selectPerson({},this.callParents("getPersonType",null,null,!0))},call_personMenuVisible:function(c,b){this._menuStates[b.key]=b.value;var d=!0;a.each(this._menuStates,function(b,a){d=!a&&d});d?this.element.addClass("person-active_state_show"):this.element.removeClass("person-active_state_show")},call_showSidebar:function(a,b){b?
this.element.hide():this.element.show()},call_selectPerson:function(a,b){this.element.removeClass("person-active_type_yellow person-active_type_red person-active_type_blue");this.element.addClass("person-active_type_"+b)}})})(jQuery);
(function(a){a.widget("exam.person-bar",a.boolive.widget,{_menuStates:null,_create:function(){a.boolive.widget.prototype._create.call(this);this._menuStates={};var c=this;this.element.on("click",".person-bar__item",function(b){a(this).hasClass("person-bar__item_state_active")||(b.preventDefault(),c.callParents("selectPerson",a(this).attr("data-type"),null,!0))});this.call_selectPerson({},this.callParents("getPersonType",null,null,!0))},call_personMenuVisible:function(c,b){this._menuStates[b.key]=
b.value;var d=!0;a.each(this._menuStates,function(b,a){d=!a&&d});d?this.element.addClass("person-bar_state_show"):this.element.removeClass("person-bar_state_show")},call_showSidebar:function(a,b){b?this.element.hide():this.element.show()},call_selectPerson:function(a,b){this.element.find(".person-bar__item_state_active").removeClass("person-bar__item_state_active");this.element.find('[data-type="'+b+'"]').addClass("person-bar__item_state_active")},call_personPosition:function(a,b){this.element.find(".person-bar__item_type_"+
b.type).removeClass("person-bar__item_pos_1 person-bar__item_pos_2 person-bar__item_pos_3 person-bar__item_pos_4").addClass("person-bar__item_pos_"+b.pos)}})})(jQuery);
(function(a){a.widget("exam.person-menu",a.boolive.widget,{_create:function(){a.boolive.widget.prototype._create.call(this);var c=this;"undefined"===typeof this.options.scrollto&&(this.options.scrollto=!1);a.isArray(c.options.when_hidden)||(c.options.when_hidden=["out-top","out-bottom"]);this.element.on("click",".person-menu__item",function(b){a(this).hasClass("person-menu__item_state_active")||(b.preventDefault(),c.callParents("selectPerson",a(this).attr("data-type"),null,!0),c.options.scrollto&&
(b=a(c.options.scrollto+":first"),b.size()&&a("html,body").animate({scrollTop:b.offset().top},"slow")))}).on("mouseenter",".person-menu__item",function(b){c._showDescription(a(this).attr("data-type"))}).on("mouseleave",".person-menu__item",function(b){c._showDescription()});a(window).on("scroll resize",function(){c._checkVisible()});this.call_selectPerson({},this.callParents("getPersonType",null,null,!0))},_checkVisible:function(){if(!this.wait_check){this.wait_check=!0;var c=a(window),b="in";this.element.offset().top+
this.element.height()<c.scrollTop()?b="out-top":c.scrollTop()+c.height()<this.element.offset().top&&(b="out-bottom");"in"!==b&&-1===a.inArray(b,this.options.when_hidden)&&(b="in");this.callParents("personMenuVisible",{value:"in"===b,key:this.eventNamespace},null,!0);this.wait_check=!1}},_showDescription:function(a){"undefined"===typeof a&&(a=this.element.find(".person-menu__item_state_active:first").attr("data-type"));this.element.find(".person-menu__desc:visible").hide();this.element.find(".person-menu__desc_type_"+
a).show()},call_selectPerson:function(a,b){this.element.find(".person-menu__item_state_active").removeClass("person-menu__item_state_active");this.element.find(".person-menu__item_type_"+b).addClass("person-menu__item_state_active");this._showDescription()}})})(jQuery);
(function(a,c){a.widget("exam.sidebar",a.boolive.widget,{_left:0,_width:0,_$texts:null,_create:function(){a.boolive.widget.prototype._create.call(this);var b=this;this._left=this.element.offset().left;this._width=this.element.find(".sidebar__item-content").outerWidth();this._$texts=this.element.find(".texts");this.element.on("click",function(a){b.element.hasClass("sidebar_state_show")||(a.preventDefault(),b.callParents("showSidebar",!b.element.hasClass("sidebar_state_show"),null,!0))});a(c).on("resize",
function(){b._view()});this._view();this.call_selectPerson({},this.callParents("getPersonType",null,null,!0))},_view:function(){var b;b=this.element.hasClass("sidebar_state_show")?Math.max(0,a(c).width()-this._width):this._left;this.element.offset().left!==b&&this.element.stop().animate({left:b})},call_showSidebar:function(b,a){a?this.element.addClass("sidebar_state_show"):this.element.removeClass("sidebar_state_show");this._view()},call_selectPerson:function(b,a){this._$texts.find(".texts__item_state_active").removeClass("texts__item_state_active");
this._$texts.find(".texts__item_type_"+a).addClass("texts__item_state_active")}})})(jQuery,window);(function(a){a.widget("exam.sidebar-switcher",a.boolive.widget,{_create:function(){a.boolive.widget.prototype._create.call(this);var c=this;this.element.on("click",function(b){b.preventDefault();c.callParents("showSidebar",!c.element.hasClass("sidebar-switcher_state_show"),null,!0)})},call_showSidebar:function(a,b){b?this.element.addClass("sidebar-switcher_state_show"):this.element.removeClass("sidebar-switcher_state_show")}})})(jQuery);
(function(a,c){a.widget("exam.story",a.boolive.widget,{_$storyPath:null,_$videoBtn:null,_personPosAll:null,_personPosCur:null,_personTypeCur:null,_create:function(){a.boolive.widget.prototype._create.call(this);var b=this;this.element.on("click",function(a){b.element.hasClass("story_state_close")&&(a.preventDefault(),b.callParents("showSidebar",!1,null,!0))});this._personPosAll={};this._personPosCur={};this._$storyPath=this.element.find(".story-path:first");this._$storyPath.children(".story-path__item[data-type]").each(function(){var c=
a(this).data("type");"undefined"===typeof b._personPosAll[c]&&(b._personPosAll[c]=[]);a(this).find("[data-pos]").each(function(){b._personPosAll[c].push({pos:a(this).data("pos"),top:a(this).offset().top})})});a(window).on("scroll resize",function(){b._findPersonPosition()});this._$videoBtn=this.element.find(".video-btn:first");this._$videoBtn.on("click",function(a){a.preventDefault();b.callParents("playVideo",!0,null,!0)});this.call_selectPerson({},["yellow","blue","red"][Math.round(2*Math.random())])},
_findPersonPosition:function(){var b=this,c=a(window).scrollTop()+a(window).height()/2;a.each(this._personPosAll,function(a,e){var f=e[0].pos,h=Math.abs(c-e[0].top),k,l,m=e.length;for(k=1;k<m;k++)l=Math.abs(c-e[k].top),l<h&&(f=e[k].pos,h=l);b._personPosCur[a]!==f&&(b._personPosCur[a]=f,b.callParents("personPosition",{type:a,pos:f},null,!0))})},call_getPersonType:function(){return this._personTypeCur},call_showSidebar:function(b,a){a?this.element.addClass("story_state_close"):this.element.removeClass("story_state_close")},
call_selectPerson:function(a,c){this._personTypeCur=c;this.element.removeClass("story_type_yellow story_type_red story_type_blue");this.element.addClass("story_type_"+c);this._$videoBtn.removeClass("video-btn_type_yellow video-btn_type_red video-btn_type_blue");this._$videoBtn.addClass("video-btn_type_"+c);this._$storyPath.find(".story-path__item_state_active").removeClass("story-path__item_state_active");this._$storyPath.find(".story-path__item_type_"+c).addClass("story-path__item_state_active")}})})(jQuery);